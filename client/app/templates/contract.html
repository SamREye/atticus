{% extends "base.html" %}

{% block content %}
	<table>
		<tr><td>Title</td><td>{{contract.template.title}}</td></tr>
		<tr><td>Status</td><td>{{contract.status}}</td></tr>
		<tr><td>Owner</td><td>{{contract.owner.username}}</td></tr>
		<tr><td>Text</td><td>{{contract.template.body}}</td></tr>
		<!--<tr><td>Code</td><td>{{contract.template.code}}</td></tr>-->
		<tr><td>Parties</td>
			<td>
				{% for party in parties %}
				<li>{{party.role}}: {{party.user.username}}</li>
				{% endfor %}
			</td></tr>
		<tr><td>Params</td><td>{{contract.params}}</td></tr>
		<tr><td>Actions</td><td>
			{% for action in transitions[contract.status]["owner" if contract.owner.id == current_user.id else "cparty"] %}
                	<a href={{"/contract/" ~ contract.id ~ "/" ~ action}}>{{action}}</a>
                	{% endfor %}
                	{% for action in transitions[contract.status]["any"] %}
                	<a href={{"/contract/" ~ contract.id ~ "/" ~ action}}>{{action}}</a>
                	{% endfor %}
		</td></tr>
		<tr><td>Parent</td>
			{% if parent is not none %}
			<td><a href={{"/contract/" ~ parent.id}}>{{parent.template.title}}</a></td>
			{% else %}
			<td>[None]</td>
			{% endif %}
		</tr>
	</table>
{% endblock %}
